<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/vhtml@2.2.0/dist/vhtml.js"></script>

    <script
      defer
      src="https://unpkg.com/es-module-shims@0.5.2/dist/es-module-shims.js"
    ></script>
    <script type="importmap-shim">
      {
        "imports": {
          "react": "https://unpkg.com/es-react/dev/react.js",
          "react-dom": "https://unpkg.com/es-react/dev/react-dom.js",
          "ezform": "/ezform.js"
        }
      }
    </script>

    <!--
    <script type="importmap-shim">
      {
        "imports": {
          "preact": "https://unpkg.com/preact/dist/preact.module.js",
          "preact/hooks": "https://unpkg.com/preact/hooks/dist/hooks.module.js",
          "react": "https://unpkg.com/preact/compat/dist/compat.module.js",
          "react-dom": "https://unpkg.com/preact/compat/dist/compat.module.js"
        }
      }
    </script>
    -->
    <script type="module-shim">
      console.log("hello2");
      import {ezForm, parseFormInputs, fromExtraTerse} from "./ezform.js";
      const h = window.vhtml;
      const { Field, Form,  } = ezForm(h);
      const f = Form({
        onSubmit: (inputs) => console.log({ inputs }),
        children: [
          { ezTitle: "Text input with value", value: "text value" },
          { ezTitle: "Textarea", rows: 5, value: "this is value data" },
          {
            ezTitle: "Checkboxes",
            children: [{ label: "Apple", checked: true }, { label: "Pear" }],
          },
          {
            ezTitle: "Radios",
            type: "radio",
            children: [{ label: "Apple", checked: true }, { label: "Pear" }],
          },
          {
            type: "select",
            name: "Select fruit",
            children: [
              { label: "Apple", value: "apple" },
              "Pear",
              "Passion fruit",
            ],
          },
          "Submit"
        ]
          .map(fromExtraTerse)
          .map((f) => Field(f)),
      });
      //document.body.innerHTML = f;
      document.getElementById("vhtml").innerHTML = f;
    </script>
    <script type="module-shim">
      //import { React, ReactDOM, PropTypes } from "https://unpkg.com/es-react";
      import React from "react";
      import ReactDOM from "react-dom";
      import {ezForm} from "ezform";
      const h = React.createElement;
      const { Field, Form } = ezForm(h, {idPrefix: "r-"});
      let f = Form({
        onSubmit: (inputs) => console.log(JSON.stringify({ inputs }, null, 2)),
        children: [
          { ezTitle: "Text input with value", value: "text value" },
          { placeholder: "Textarea", rows: 5 },
          {
            ezTitle: "Checkboxes",
            children: [{ label: "Apple", checked: true }, { label: "Pear" }],
          },
          {
            ezTitle: "Radios",
            type: "radio",
            children: [{ label: "Apple"}, { label: "Pear", checked: true  }],
          },
          {
            type: "select",
            ezTitle: "Select fruit",
            multiple: true,
            children: [
              {label: "Apple", value: "apple" },
              {label: "Pear"},
              {label: "Passion fruit"},
            ],
          },
          {ezTitle:"Submit"}
        ]
          //.map(fromExtraTerse)
          .map((f, i) => Field({ ...f, key: i })),
      });
      ReactDOM.render(f, document.getElementById("react"));
    </script>
  </head>
  <body>
    <div id="vhtml">vhtml</div>
    <div id="react">react</div>
    <script>
      console.log("hello1");
    </script>
  </body>
</html>
